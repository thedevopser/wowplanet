#!/usr/bin/env sh
set -eu

echo "Running PHPCBF (PSR12 check)..."
if ! make phpcbf-check >/dev/null 2>&1; then
  echo "âŒ Code style violations detected (PSR12)." >&2
  echo "Run 'make phpcbf-fix' to automatically fix them." >&2
  exit 1
fi

echo "Running quality..."
if ! make quality >/dev/null; then
  echo "Quality failed. Commit aborted." >&2
  exit 1
fi

echo "Running tests..."
if ! make test >/dev/null; then
  echo "Tests failed. Commit aborted." >&2
  exit 1
fi

echo "All checks passed."
